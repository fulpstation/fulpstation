<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <base href="../../" />
    <link rel="stylesheet" href="dmdoc.css" />
    <title>&#x2F;datum&#x2F;heretic_knowledge&#x2F;hunt_and_sacrifice - &#x2F;tg&#x2F; Station 13</title>
</head>
<body>
<header>
    <a href="index.html">&#x2F;tg&#x2F; Station 13</a> -
    <a href="index.html#modules">Modules</a> -
    <a href="index.html#types">Types</a>
 &mdash; <a href="datum/heretic_knowledge/hunt_and_sacrifice.html#var">Var Details</a> - <a href="datum/heretic_knowledge/hunt_and_sacrifice.html#proc">Proc Details</a></header>
<main>
<h1>hunt_and_sacrifice <aside>/<a href="datum.html">datum</a>/<a href="datum/heretic_knowledge.html">heretic_knowledge</a>/<a href="datum/heretic_knowledge/hunt_and_sacrifice.html">hunt_and_sacrifice</a></aside>
        
    
            <a href="https://github.com/fulpstation/fulpstation/blob/629e2d40b55cd98862d1c91ccc4f04e9286e1fdc/code/modules/antagonists/heretic/knowledge/sacrifice_knowledge/sacrifice_knowledge.dm#L11">
        <img src="git.png" width="16" height="16" title="code&#x2F;modules&#x2F;antagonists&#x2F;heretic&#x2F;knowledge&#x2F;sacrifice_knowledge&#x2F;sacrifice_knowledge.dm 11"/></a></h1>

<p>Allows the heretic to sacrifice living heart targets.</p><table class="summary" cellspacing="0"><tr><td colspan="2"><h2>Vars</h2></td></tr>
            <tr><th><a href="datum/heretic_knowledge/hunt_and_sacrifice.html#var/heretic_level_generated">heretic_level_generated</a></th><td>Whether we've generated a heretic sacrifice z-level yet, from any heretic.</td></tr>
            <tr><th><a href="datum/heretic_knowledge/hunt_and_sacrifice.html#var/heretic_mind">heretic_mind</a></th><td>A weakref to the mind of our heretic.</td></tr>
            <tr><th><a href="datum/heretic_knowledge/hunt_and_sacrifice.html#var/num_targets_to_generate">num_targets_to_generate</a></th><td>How many targets do we generate?</td></tr>
            <tr><th><a href="datum/heretic_knowledge/hunt_and_sacrifice.html#var/return_timers">return_timers</a></th><td>An assoc list of [ref] to [timers] - a list of all the timers of people in the shadow realm currently</td></tr>
            <tr><th><a href="datum/heretic_knowledge/hunt_and_sacrifice.html#var/target_blacklist">target_blacklist</a></th><td>Lazylist of minds that we won't pick as targets.</td></tr><tr><td colspan="2"><h2>Procs</h2></td></tr>
            <tr><th><a href="datum/heretic_knowledge/hunt_and_sacrifice.html#proc/after_helgrasp_ends">after_helgrasp_ends</a></th><td>This proc is called from [proc/after_target_wakes] after the helgrasp runs out in the [sac_target].)</td></tr>
            <tr><th><a href="datum/heretic_knowledge/hunt_and_sacrifice.html#proc/after_return_dead_target">after_return_dead_target</a></th><td>This proc is called from [proc/return_target] if the target dies in the shadow realm.)</td></tr>
            <tr><th><a href="datum/heretic_knowledge/hunt_and_sacrifice.html#proc/after_return_live_target">after_return_live_target</a></th><td>This proc is called from [proc/return_target] if the [sac_target] survives the shadow realm.)</td></tr>
            <tr><th><a href="datum/heretic_knowledge/hunt_and_sacrifice.html#proc/after_target_sleeps">after_target_sleeps</a></th><td>This proc is called from [proc/begin_sacrifice] after the [sac_target] falls asleep), shortly after the sacrifice occurs.</td></tr>
            <tr><th><a href="datum/heretic_knowledge/hunt_and_sacrifice.html#proc/after_target_wakes">after_target_wakes</a></th><td>This proc is called from [proc/after_target_sleeps] when the [sac_target] should be waking up.)</td></tr>
            <tr><th><a href="datum/heretic_knowledge/hunt_and_sacrifice.html#proc/begin_sacrifice">begin_sacrifice</a></th><td>This proc is called from [proc/sacrifice_process] after the heretic successfully sacrifices [sac_target].)</td></tr>
            <tr><th><a href="datum/heretic_knowledge/hunt_and_sacrifice.html#proc/disembowel_target">disembowel_target</a></th><td>&quot;Fuck you&quot; proc that gets called if the chain is interrupted at some points.
Disembowels the [sac_target] and brutilizes their body. Throws some gibs around for good measure.</td></tr>
            <tr><th><a href="datum/heretic_knowledge/hunt_and_sacrifice.html#proc/generate_heretic_z_level">generate_heretic_z_level</a></th><td>Generate the sacrifice z-level.</td></tr>
            <tr><th><a href="datum/heretic_knowledge/hunt_and_sacrifice.html#proc/obtain_targets">obtain_targets</a></th><td>Obtain a list of targets for the user to hunt down and sacrifice.
Tries to get four targets (minds) with living human currents.</td></tr>
            <tr><th><a href="datum/heretic_knowledge/hunt_and_sacrifice.html#proc/on_target_death">on_target_death</a></th><td>If they die in the shadow realm, they lost. Send them back.</td></tr>
            <tr><th><a href="datum/heretic_knowledge/hunt_and_sacrifice.html#proc/on_target_escape">on_target_escape</a></th><td>If they somehow cheese the shadow realm by teleporting out, they are disemboweled and killed.</td></tr>
            <tr><th><a href="datum/heretic_knowledge/hunt_and_sacrifice.html#proc/return_target">return_target</a></th><td>This proc is called from [proc/begin_sacrifice] if the target survived the shadow realm), or <a href="code/__DEFINES/dcs/signals/signals_mob/signals_mob_living.html#define/COMSIG_LIVING_DEATH" title="COMSIG_LIVING_DEATH">COMSIG_LIVING_DEATH</a> if they don't.</td></tr>
            <tr><th><a href="datum/heretic_knowledge/hunt_and_sacrifice.html#proc/sacrifice_process">sacrifice_process</a></th><td>Begin the process of sacrificing the target.</td></tr></table>
    <h2 id="var">Var Details</h2><h3 id="var/heretic_level_generated"><aside class="declaration">var </aside>heretic_level_generated
            <aside>&ndash; /static</aside>
        
    
            <a href="https://github.com/fulpstation/fulpstation/blob/629e2d40b55cd98862d1c91ccc4f04e9286e1fdc/code/modules/antagonists/heretic/knowledge/sacrifice_knowledge/sacrifice_knowledge.dm#L22">
        <img src="git.png" width="16" height="16" title="code&#x2F;modules&#x2F;antagonists&#x2F;heretic&#x2F;knowledge&#x2F;sacrifice_knowledge&#x2F;sacrifice_knowledge.dm 22"/></a></h3>
        <p>Whether we've generated a heretic sacrifice z-level yet, from any heretic.</p><h3 id="var/heretic_mind"><aside class="declaration">var </aside>heretic_mind
            <aside>&ndash; /<a href="datum.html">datum</a>/<a href="datum/mind.html">mind</a></aside>
        
    
            <a href="https://github.com/fulpstation/fulpstation/blob/629e2d40b55cd98862d1c91ccc4f04e9286e1fdc/code/modules/antagonists/heretic/knowledge/sacrifice_knowledge/sacrifice_knowledge.dm#L24">
        <img src="git.png" width="16" height="16" title="code&#x2F;modules&#x2F;antagonists&#x2F;heretic&#x2F;knowledge&#x2F;sacrifice_knowledge&#x2F;sacrifice_knowledge.dm 24"/></a></h3>
        <p>A weakref to the mind of our heretic.</p><h3 id="var/num_targets_to_generate"><aside class="declaration">var </aside>num_targets_to_generate
            <aside>&ndash; </aside>
        
    
            <a href="https://github.com/fulpstation/fulpstation/blob/629e2d40b55cd98862d1c91ccc4f04e9286e1fdc/code/modules/antagonists/heretic/knowledge/sacrifice_knowledge/sacrifice_knowledge.dm#L20">
        <img src="git.png" width="16" height="16" title="code&#x2F;modules&#x2F;antagonists&#x2F;heretic&#x2F;knowledge&#x2F;sacrifice_knowledge&#x2F;sacrifice_knowledge.dm 20"/></a></h3>
        <p>How many targets do we generate?</p><h3 id="var/return_timers"><aside class="declaration">var </aside>return_timers
            <aside>&ndash; /list</aside>
        
    
            <a href="https://github.com/fulpstation/fulpstation/blob/629e2d40b55cd98862d1c91ccc4f04e9286e1fdc/code/modules/antagonists/heretic/knowledge/sacrifice_knowledge/sacrifice_knowledge.dm#L30">
        <img src="git.png" width="16" height="16" title="code&#x2F;modules&#x2F;antagonists&#x2F;heretic&#x2F;knowledge&#x2F;sacrifice_knowledge&#x2F;sacrifice_knowledge.dm 30"/></a></h3>
        <p>An assoc list of [ref] to [timers] - a list of all the timers of people in the shadow realm currently</p><h3 id="var/target_blacklist"><aside class="declaration">var </aside>target_blacklist
            <aside>&ndash; /list/datum/mind</aside>
        
    
            <a href="https://github.com/fulpstation/fulpstation/blob/629e2d40b55cd98862d1c91ccc4f04e9286e1fdc/code/modules/antagonists/heretic/knowledge/sacrifice_knowledge/sacrifice_knowledge.dm#L26">
        <img src="git.png" width="16" height="16" title="code&#x2F;modules&#x2F;antagonists&#x2F;heretic&#x2F;knowledge&#x2F;sacrifice_knowledge&#x2F;sacrifice_knowledge.dm 26"/></a></h3>
        <p>Lazylist of minds that we won't pick as targets.</p><h2 id="proc">Proc Details</h2><h3 id="proc/after_helgrasp_ends"><aside class="declaration">proc </aside>after_helgrasp_ends<aside>(/<a href="mob.html">mob</a>/<a href="mob/living.html">living</a>/<a href="mob/living/carbon.html">carbon</a>/<a href="mob/living/carbon/human.html">human</a>/sac_target) 
        
    
            <a href="https://github.com/fulpstation/fulpstation/blob/629e2d40b55cd98862d1c91ccc4f04e9286e1fdc/code/modules/antagonists/heretic/knowledge/sacrifice_knowledge/sacrifice_knowledge.dm#L345">
        <img src="git.png" width="16" height="16" title="code&#x2F;modules&#x2F;antagonists&#x2F;heretic&#x2F;knowledge&#x2F;sacrifice_knowledge&#x2F;sacrifice_knowledge.dm 345"/></a></aside>
        </h3>
        <p>This proc is called from [proc/after_target_wakes] after the helgrasp runs out in the [sac_target].)</p>
<p>It gives them a message letting them know it's getting easier and they're almost free.</p><h3 id="proc/after_return_dead_target"><aside class="declaration">proc </aside>after_return_dead_target<aside>(/<a href="mob.html">mob</a>/<a href="mob/living.html">living</a>/<a href="mob/living/carbon.html">carbon</a>/<a href="mob/living/carbon/human.html">human</a>/sac_target) 
        
    
            <a href="https://github.com/fulpstation/fulpstation/blob/629e2d40b55cd98862d1c91ccc4f04e9286e1fdc/code/modules/antagonists/heretic/knowledge/sacrifice_knowledge/sacrifice_knowledge.dm#L472">
        <img src="git.png" width="16" height="16" title="code&#x2F;modules&#x2F;antagonists&#x2F;heretic&#x2F;knowledge&#x2F;sacrifice_knowledge&#x2F;sacrifice_knowledge.dm 472"/></a></aside>
        </h3>
        <p>This proc is called from [proc/return_target] if the target dies in the shadow realm.)</p>
<p>After teleporting the target back to the station (dead),
it spawns a special red broken illusion on their spot, for style.</p><h3 id="proc/after_return_live_target"><aside class="declaration">proc </aside>after_return_live_target<aside>(/<a href="mob.html">mob</a>/<a href="mob/living.html">living</a>/<a href="mob/living/carbon.html">carbon</a>/<a href="mob/living/carbon/human.html">human</a>/sac_target) 
        
    
            <a href="https://github.com/fulpstation/fulpstation/blob/629e2d40b55cd98862d1c91ccc4f04e9286e1fdc/code/modules/antagonists/heretic/knowledge/sacrifice_knowledge/sacrifice_knowledge.dm#L445">
        <img src="git.png" width="16" height="16" title="code&#x2F;modules&#x2F;antagonists&#x2F;heretic&#x2F;knowledge&#x2F;sacrifice_knowledge&#x2F;sacrifice_knowledge.dm 445"/></a></aside>
        </h3>
        <p>This proc is called from [proc/return_target] if the [sac_target] survives the shadow realm.)</p>
<p>Gives the sacrifice target some after effects upon ariving back to reality.</p><h3 id="proc/after_target_sleeps"><aside class="declaration">proc </aside>after_target_sleeps<aside>(/<a href="mob.html">mob</a>/<a href="mob/living.html">living</a>/<a href="mob/living/carbon.html">carbon</a>/<a href="mob/living/carbon/human.html">human</a>/sac_target, /<a href="turf.html">turf</a>/destination) 
        
    
            <a href="https://github.com/fulpstation/fulpstation/blob/629e2d40b55cd98862d1c91ccc4f04e9286e1fdc/code/modules/antagonists/heretic/knowledge/sacrifice_knowledge/sacrifice_knowledge.dm#L274">
        <img src="git.png" width="16" height="16" title="code&#x2F;modules&#x2F;antagonists&#x2F;heretic&#x2F;knowledge&#x2F;sacrifice_knowledge&#x2F;sacrifice_knowledge.dm 274"/></a></aside>
        </h3>
        <p>This proc is called from [proc/begin_sacrifice] after the [sac_target] falls asleep), shortly after the sacrifice occurs.</p>
<p>Teleports the [sac_target] to the heretic room, asleep.
If it fails to teleport, they will be disemboweled and stop the chain.</p>
<p>Arguments</p>
<ul>
<li>sac_target - the mob being sacrificed.</li>
<li>destination - the spot they're being teleported to.</li>
</ul><h3 id="proc/after_target_wakes"><aside class="declaration">proc </aside>after_target_wakes<aside>(/<a href="mob.html">mob</a>/<a href="mob/living.html">living</a>/<a href="mob/living/carbon.html">carbon</a>/<a href="mob/living/carbon/human.html">human</a>/sac_target) 
        
    
            <a href="https://github.com/fulpstation/fulpstation/blob/629e2d40b55cd98862d1c91ccc4f04e9286e1fdc/code/modules/antagonists/heretic/knowledge/sacrifice_knowledge/sacrifice_knowledge.dm#L313">
        <img src="git.png" width="16" height="16" title="code&#x2F;modules&#x2F;antagonists&#x2F;heretic&#x2F;knowledge&#x2F;sacrifice_knowledge&#x2F;sacrifice_knowledge.dm 313"/></a></aside>
        </h3>
        <p>This proc is called from [proc/after_target_sleeps] when the [sac_target] should be waking up.)</p>
<p>Begins the survival minigame, featuring the sacrifice targets.
Gives them Helgrasp, throwing cursed hands towards them that they must dodge to survive.
Also gives them a status effect, Unholy Determination, to help them in this endeavor.</p>
<p>Then applies some miscellaneous effects.</p><h3 id="proc/begin_sacrifice"><aside class="declaration">proc </aside>begin_sacrifice<aside>(/<a href="mob.html">mob</a>/<a href="mob/living.html">living</a>/<a href="mob/living/carbon.html">carbon</a>/<a href="mob/living/carbon/human.html">human</a>/sac_target) 
        
    
            <a href="https://github.com/fulpstation/fulpstation/blob/629e2d40b55cd98862d1c91ccc4f04e9286e1fdc/code/modules/antagonists/heretic/knowledge/sacrifice_knowledge/sacrifice_knowledge.dm#L213">
        <img src="git.png" width="16" height="16" title="code&#x2F;modules&#x2F;antagonists&#x2F;heretic&#x2F;knowledge&#x2F;sacrifice_knowledge&#x2F;sacrifice_knowledge.dm 213"/></a></aside>
        </h3>
        <p>This proc is called from [proc/sacrifice_process] after the heretic successfully sacrifices [sac_target].)</p>
<p>Sets off a chain that sends the person sacrificed to the shadow realm to dodge hands to fight for survival.</p>
<p>Arguments</p>
<ul>
<li>sac_target - the mob being sacrificed.</li>
</ul><h3 id="proc/disembowel_target"><aside class="declaration">proc </aside>disembowel_target<aside>(/<a href="mob.html">mob</a>/<a href="mob/living.html">living</a>/<a href="mob/living/carbon.html">carbon</a>/<a href="mob/living/carbon/human.html">human</a>/sac_target) 
        
    
            <a href="https://github.com/fulpstation/fulpstation/blob/629e2d40b55cd98862d1c91ccc4f04e9286e1fdc/code/modules/antagonists/heretic/knowledge/sacrifice_knowledge/sacrifice_knowledge.dm#L485">
        <img src="git.png" width="16" height="16" title="code&#x2F;modules&#x2F;antagonists&#x2F;heretic&#x2F;knowledge&#x2F;sacrifice_knowledge&#x2F;sacrifice_knowledge.dm 485"/></a></aside>
        </h3>
        <p>&quot;Fuck you&quot; proc that gets called if the chain is interrupted at some points.
Disembowels the [sac_target] and brutilizes their body. Throws some gibs around for good measure.</p><h3 id="proc/generate_heretic_z_level"><aside class="declaration">proc </aside>generate_heretic_z_level<aside>() 
        
    
            <a href="https://github.com/fulpstation/fulpstation/blob/629e2d40b55cd98862d1c91ccc4f04e9286e1fdc/code/modules/antagonists/heretic/knowledge/sacrifice_knowledge/sacrifice_knowledge.dm#L48">
        <img src="git.png" width="16" height="16" title="code&#x2F;modules&#x2F;antagonists&#x2F;heretic&#x2F;knowledge&#x2F;sacrifice_knowledge&#x2F;sacrifice_knowledge.dm 48"/></a></aside>
        </h3>
        <p>Generate the sacrifice z-level.</p><h3 id="proc/obtain_targets"><aside class="declaration">proc </aside>obtain_targets<aside>(/<a href="mob.html">mob</a>/<a href="mob/living.html">living</a>/user, silent, /<a href="datum.html">datum</a>/<a href="datum/antagonist.html">antagonist</a>/<a href="datum/antagonist/heretic.html">heretic</a>/heretic_datum) 
        
    
            <a href="https://github.com/fulpstation/fulpstation/blob/629e2d40b55cd98862d1c91ccc4f04e9286e1fdc/code/modules/antagonists/heretic/knowledge/sacrifice_knowledge/sacrifice_knowledge.dm#L104">
        <img src="git.png" width="16" height="16" title="code&#x2F;modules&#x2F;antagonists&#x2F;heretic&#x2F;knowledge&#x2F;sacrifice_knowledge&#x2F;sacrifice_knowledge.dm 104"/></a></aside>
        </h3>
        <p>Obtain a list of targets for the user to hunt down and sacrifice.
Tries to get four targets (minds) with living human currents.</p>
<p>Returns FALSE if no targets are found, TRUE if the targets list was populated.</p><h3 id="proc/on_target_death"><aside class="declaration">proc </aside>on_target_death<aside>(/<a href="mob.html">mob</a>/<a href="mob/living.html">living</a>/<a href="mob/living/carbon.html">carbon</a>/<a href="mob/living/carbon/human.html">human</a>/sac_target, gibbed) 
        
    
            <a href="https://github.com/fulpstation/fulpstation/blob/629e2d40b55cd98862d1c91ccc4f04e9286e1fdc/code/modules/antagonists/heretic/knowledge/sacrifice_knowledge/sacrifice_knowledge.dm#L422">
        <img src="git.png" width="16" height="16" title="code&#x2F;modules&#x2F;antagonists&#x2F;heretic&#x2F;knowledge&#x2F;sacrifice_knowledge&#x2F;sacrifice_knowledge.dm 422"/></a></aside>
        </h3>
        <p>If they die in the shadow realm, they lost. Send them back.</p><h3 id="proc/on_target_escape"><aside class="declaration">proc </aside>on_target_escape<aside>(/<a href="mob.html">mob</a>/<a href="mob/living.html">living</a>/<a href="mob/living/carbon.html">carbon</a>/<a href="mob/living/carbon/human.html">human</a>/sac_target, old_z, new_z) 
        
    
            <a href="https://github.com/fulpstation/fulpstation/blob/629e2d40b55cd98862d1c91ccc4f04e9286e1fdc/code/modules/antagonists/heretic/knowledge/sacrifice_knowledge/sacrifice_knowledge.dm#L433">
        <img src="git.png" width="16" height="16" title="code&#x2F;modules&#x2F;antagonists&#x2F;heretic&#x2F;knowledge&#x2F;sacrifice_knowledge&#x2F;sacrifice_knowledge.dm 433"/></a></aside>
        </h3>
        <p>If they somehow cheese the shadow realm by teleporting out, they are disemboweled and killed.</p><h3 id="proc/return_target"><aside class="declaration">proc </aside>return_target<aside>(/<a href="mob.html">mob</a>/<a href="mob/living.html">living</a>/<a href="mob/living/carbon.html">carbon</a>/<a href="mob/living/carbon/human.html">human</a>/sac_target) 
        
    
            <a href="https://github.com/fulpstation/fulpstation/blob/629e2d40b55cd98862d1c91ccc4f04e9286e1fdc/code/modules/antagonists/heretic/knowledge/sacrifice_knowledge/sacrifice_knowledge.dm#L362">
        <img src="git.png" width="16" height="16" title="code&#x2F;modules&#x2F;antagonists&#x2F;heretic&#x2F;knowledge&#x2F;sacrifice_knowledge&#x2F;sacrifice_knowledge.dm 362"/></a></aside>
        </h3>
        <p>This proc is called from [proc/begin_sacrifice] if the target survived the shadow realm), or <a href="code/__DEFINES/dcs/signals/signals_mob/signals_mob_living.html#define/COMSIG_LIVING_DEATH" title="COMSIG_LIVING_DEATH">COMSIG_LIVING_DEATH</a> if they don't.</p>
<p>Teleports [sac_target] back to a random safe turf on the station (or observer spawn if it fails to find a safe turf).
Also clears their status effects, unregisters any signals associated with the shadow realm, and sends a message
to the heretic who did the sacrificed about whether they survived, and where they ended up.</p>
<p>Arguments</p>
<ul>
<li>sac_target - the mob being sacrificed</li>
<li>heretic - the heretic who originally did the sacrifice.</li>
</ul><h3 id="proc/sacrifice_process"><aside class="declaration">proc </aside>sacrifice_process<aside>(/<a href="mob.html">mob</a>/<a href="mob/living.html">living</a>/user, /list/selected_atoms) 
        
    
            <a href="https://github.com/fulpstation/fulpstation/blob/629e2d40b55cd98862d1c91ccc4f04e9286e1fdc/code/modules/antagonists/heretic/knowledge/sacrifice_knowledge/sacrifice_knowledge.dm#L177">
        <img src="git.png" width="16" height="16" title="code&#x2F;modules&#x2F;antagonists&#x2F;heretic&#x2F;knowledge&#x2F;sacrifice_knowledge&#x2F;sacrifice_knowledge.dm 177"/></a></aside>
        </h3>
        <p>Begin the process of sacrificing the target.</p>
<p>Arguments</p>
<ul>
<li>user - the mob doing the sacrifice (a heretic)</li>
<li>selected_atoms - a list of all atoms chosen. Should be (at least) one human.</li>
<li>loc - the turf the sacrifice is occuring on</li>
</ul></main>
<footer>
    tgstation.dme
    <a href="https://github.com/fulpstation/fulpstation/tree/629e2d40b55cd98862d1c91ccc4f04e9286e1fdc">629e2d4</a>
        (master) &mdash; <a href="https://github.com/SpaceManiac/SpacemanDMM/blob/master/crates/dmdoc/README.md">dmdoc 1.7.3</a></footer>
</body>
</html>
