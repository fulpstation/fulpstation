<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <base href="../../" />
    <link rel="stylesheet" href="dmdoc.css" />
    <title>&#x2F;datum&#x2F;element&#x2F;give_turf_traits - &#x2F;tg&#x2F; Station 13</title>
</head>
<body>
<header>
    <a href="index.html">&#x2F;tg&#x2F; Station 13</a> -
    <a href="index.html#modules">Modules</a> -
    <a href="index.html#types">Types</a>
 &mdash; <a href="datum/element/give_turf_traits.html#var">Var Details</a> - <a href="datum/element/give_turf_traits.html#proc">Proc Details</a></header>
<main>
<h1>give_turf_traits <aside>/<a href="datum.html">datum</a>/<a href="datum/element.html">element</a>/<a href="datum/element/give_turf_traits.html">give_turf_traits</a></aside>
        
    
            <a href="https://github.com/fulpstation/fulpstation/blob/629e2d40b55cd98862d1c91ccc4f04e9286e1fdc/code/datums/elements/give_turf_traits.dm#L2">
        <img src="git.png" width="16" height="16" title="code&#x2F;datums&#x2F;elements&#x2F;give_turf_traits.dm 2"/></a></h1>

<p>A bespoke element that adds a set of traits to the turf while occupied by at least one attached movabled.</p><table class="summary" cellspacing="0"><tr><td colspan="2"><h2>Vars</h2></td></tr>
            <tr><th><a href="datum/element/give_turf_traits.html#var/trait_sources">trait_sources</a></th><td>List of sources we are using to reapply traits when turf changes</td></tr>
            <tr><th><a href="datum/element/give_turf_traits.html#var/traits">traits</a></th><td>A list of traits that are added to the turf while occupied.</td></tr><tr><td colspan="2"><h2>Procs</h2></td></tr>
            <tr><th><a href="datum/element/give_turf_traits.html#proc/add_to_occupied_turfs">add_to_occupied_turfs</a></th><td>Registers the turf signals if it was previously unoccupied and adds it to the list of occupied turfs.
Otherwise, it just adds the movable to the assoc value of lists occupying the turf.</td></tr>
            <tr><th><a href="datum/element/give_turf_traits.html#proc/on_moved">on_moved</a></th><td>Removes the trait from the old turf and adds it to the new one.</td></tr>
            <tr><th><a href="datum/element/give_turf_traits.html#proc/pre_change_turf">pre_change_turf</a></th><td>Signals and components are carried over when the turf is changed, so they've to be readded post-change.</td></tr>
            <tr><th><a href="datum/element/give_turf_traits.html#proc/remove_from_occupied_turfs">remove_from_occupied_turfs</a></th><td>Unregisters the turf signals if it's no longer unoccupied and removes it from the list of occupied turfs.
Otherwise, it just removes the movable from the assoc value of lists occupying the turf.</td></tr>
            <tr><th><a href="datum/element/give_turf_traits.html#proc/reoccupy_turf">reoccupy_turf</a></th><td>Reapply turf traits to the provided turf</td></tr></table>
    <h2 id="var">Var Details</h2><h3 id="var/trait_sources"><aside class="declaration">var </aside>trait_sources
            <aside>&ndash; /list</aside>
        
    
            <a href="https://github.com/fulpstation/fulpstation/blob/629e2d40b55cd98862d1c91ccc4f04e9286e1fdc/code/datums/elements/give_turf_traits.dm#L8">
        <img src="git.png" width="16" height="16" title="code&#x2F;datums&#x2F;elements&#x2F;give_turf_traits.dm 8"/></a></h3>
        <p>List of sources we are using to reapply traits when turf changes</p><h3 id="var/traits"><aside class="declaration">var </aside>traits
            <aside>&ndash; /list</aside>
        
    
            <a href="https://github.com/fulpstation/fulpstation/blob/629e2d40b55cd98862d1c91ccc4f04e9286e1fdc/code/datums/elements/give_turf_traits.dm#L6">
        <img src="git.png" width="16" height="16" title="code&#x2F;datums&#x2F;elements&#x2F;give_turf_traits.dm 6"/></a></h3>
        <p>A list of traits that are added to the turf while occupied.</p><h2 id="proc">Proc Details</h2><h3 id="proc/add_to_occupied_turfs"><aside class="declaration">proc </aside>add_to_occupied_turfs<aside>(/<a href="turf.html">turf</a>/location, /<a href="atom.html">atom</a>/<a href="atom/movable.html">movable</a>/source) 
        
    
            <a href="https://github.com/fulpstation/fulpstation/blob/629e2d40b55cd98862d1c91ccc4f04e9286e1fdc/code/datums/elements/give_turf_traits.dm#L40">
        <img src="git.png" width="16" height="16" title="code&#x2F;datums&#x2F;elements&#x2F;give_turf_traits.dm 40"/></a></aside>
        </h3>
        <p>Registers the turf signals if it was previously unoccupied and adds it to the list of occupied turfs.
Otherwise, it just adds the movable to the assoc value of lists occupying the turf.</p><h3 id="proc/on_moved"><aside class="declaration">proc </aside>on_moved<aside>(/<a href="atom.html">atom</a>/<a href="atom/movable.html">movable</a>/source, /<a href="atom.html">atom</a>/old_loc) 
        
    
            <a href="https://github.com/fulpstation/fulpstation/blob/629e2d40b55cd98862d1c91ccc4f04e9286e1fdc/code/datums/elements/give_turf_traits.dm#L28">
        <img src="git.png" width="16" height="16" title="code&#x2F;datums&#x2F;elements&#x2F;give_turf_traits.dm 28"/></a></aside>
        </h3>
        <p>Removes the trait from the old turf and adds it to the new one.</p><h3 id="proc/pre_change_turf"><aside class="declaration">proc </aside>pre_change_turf<aside>(/<a href="turf.html">turf</a>/changed, path, /list/new_baseturfs, flags, /list/post_change_callbacks) 
        
    
            <a href="https://github.com/fulpstation/fulpstation/blob/629e2d40b55cd98862d1c91ccc4f04e9286e1fdc/code/datums/elements/give_turf_traits.dm#L71">
        <img src="git.png" width="16" height="16" title="code&#x2F;datums&#x2F;elements&#x2F;give_turf_traits.dm 71"/></a></aside>
        </h3>
        <p>Signals and components are carried over when the turf is changed, so they've to be readded post-change.</p><h3 id="proc/remove_from_occupied_turfs"><aside class="declaration">proc </aside>remove_from_occupied_turfs<aside>(/<a href="turf.html">turf</a>/location, /<a href="atom.html">atom</a>/<a href="atom/movable.html">movable</a>/source) 
        
    
            <a href="https://github.com/fulpstation/fulpstation/blob/629e2d40b55cd98862d1c91ccc4f04e9286e1fdc/code/datums/elements/give_turf_traits.dm#L57">
        <img src="git.png" width="16" height="16" title="code&#x2F;datums&#x2F;elements&#x2F;give_turf_traits.dm 57"/></a></aside>
        </h3>
        <p>Unregisters the turf signals if it's no longer unoccupied and removes it from the list of occupied turfs.
Otherwise, it just removes the movable from the assoc value of lists occupying the turf.</p><h3 id="proc/reoccupy_turf"><aside class="declaration">proc </aside>reoccupy_turf<aside>(/<a href="turf.html">turf</a>/changed) 
        
    
            <a href="https://github.com/fulpstation/fulpstation/blob/629e2d40b55cd98862d1c91ccc4f04e9286e1fdc/code/datums/elements/give_turf_traits.dm#L76">
        <img src="git.png" width="16" height="16" title="code&#x2F;datums&#x2F;elements&#x2F;give_turf_traits.dm 76"/></a></aside>
        </h3>
        <p>Reapply turf traits to the provided turf</p></main>
<footer>
    tgstation.dme
    <a href="https://github.com/fulpstation/fulpstation/tree/629e2d40b55cd98862d1c91ccc4f04e9286e1fdc">629e2d4</a>
        (master) &mdash; <a href="https://github.com/SpaceManiac/SpacemanDMM/blob/master/crates/dmdoc/README.md">dmdoc 1.7.3</a></footer>
</body>
</html>
