<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <base href="../../" />
    <link rel="stylesheet" href="dmdoc.css" />
    <title>&#x2F;datum&#x2F;bodypart_overlay&#x2F;mutant - &#x2F;tg&#x2F; Station 13</title>
</head>
<body>
<header>
    <a href="index.html">&#x2F;tg&#x2F; Station 13</a> -
    <a href="index.html#modules">Modules</a> -
    <a href="index.html#types">Types</a>
 &mdash; <a href="datum/bodypart_overlay/mutant.html#var">Var Details</a> - <a href="datum/bodypart_overlay/mutant.html#proc">Proc Details</a></header>
<main>
<h1>mutant <aside>/<a href="datum.html">datum</a>/<a href="datum/bodypart_overlay.html">bodypart_overlay</a>/<a href="datum/bodypart_overlay/mutant.html">mutant</a></aside>
        
    
            <a href="https://github.com/fulpstation/fulpstation/blob/629e2d40b55cd98862d1c91ccc4f04e9286e1fdc/code/datums/bodypart_overlays/mutant_bodypart_overlay.dm#L2">
        <img src="git.png" width="16" height="16" title="code&#x2F;datums&#x2F;bodypart_overlays&#x2F;mutant_bodypart_overlay.dm 2"/></a></h1>

<p>Variant of bodypart_overlay meant to work synchronously with external organs. Gets imprinted upon Insert in on_species_gain</p><table class="summary" cellspacing="0"><tr><td colspan="2"><h2>Vars</h2></td></tr>
            <tr><th><a href="datum/bodypart_overlay/mutant.html#var/color_source">color_source</a></th><td>Where does this organ inherit it's color from?</td></tr>
            <tr><th><a href="datum/bodypart_overlay/mutant.html#var/draw_color">draw_color</a></th><td>The color this organ draws with. Updated by bodypart/inherit_color()</td></tr>
            <tr><th><a href="datum/bodypart_overlay/mutant.html#var/feature_key">feature_key</a></th><td>Defines what kind of 'organ' we're looking at. Sprites have names like 'm_mothwings_firemoth_ADJ'. 'mothwings' would then be feature_key</td></tr>
            <tr><th><a href="datum/bodypart_overlay/mutant.html#var/imprint_on_next_insertion">imprint_on_next_insertion</a></th><td>Take on the dna/preference from whoever we're gonna be inserted in</td></tr>
            <tr><th><a href="datum/bodypart_overlay/mutant.html#var/sprite_datum">sprite_datum</a></th><td>Sprite datum we use to draw on the bodypart</td></tr><tr><td colspan="2"><h2>Procs</h2></td></tr>
            <tr><th><a href="datum/bodypart_overlay/mutant.html#proc/fetch_sprite_datum">fetch_sprite_datum</a></th><td>Sprite accessories are singletons, stored list(&quot;Big Snout&quot; = instance of /datum/sprite_accessory/snout/big), so here we get that singleton</td></tr>
            <tr><th><a href="datum/bodypart_overlay/mutant.html#proc/fetch_sprite_datum_from_name">fetch_sprite_datum_from_name</a></th><td>Get the singleton from the sprite name</td></tr>
            <tr><th><a href="datum/bodypart_overlay/mutant.html#proc/generate_icon_cache">generate_icon_cache</a></th><td>Generate a unique key based on our sprites. So that if we've aleady drawn these sprites, they can be found in the cache and wont have to be drawn again (blessing and curse, but mostly curse)</td></tr>
            <tr><th><a href="datum/bodypart_overlay/mutant.html#proc/get_base_icon_state">get_base_icon_state</a></th><td>Return the BASE icon state of the sprite datum (so not the gender, layer, feature_key)</td></tr>
            <tr><th><a href="datum/bodypart_overlay/mutant.html#proc/get_global_feature_list">get_global_feature_list</a></th><td>Return a dumb glob list for this specific feature (called from parse_sprite)</td></tr>
            <tr><th><a href="datum/bodypart_overlay/mutant.html#proc/get_image">get_image</a></th><td>Get the image we need to draw on the person. Called from get_overlay() which is called from _bodyparts.dm. Limb can be null</td></tr>
            <tr><th><a href="datum/bodypart_overlay/mutant.html#proc/get_random_appearance">get_random_appearance</a></th><td>Grab a random appearance datum (thats not locked)</td></tr>
            <tr><th><a href="datum/bodypart_overlay/mutant.html#proc/inherit_color">inherit_color</a></th><td>Give the organ its color. Force will override the existing one.</td></tr>
            <tr><th><a href="datum/bodypart_overlay/mutant.html#proc/randomize_appearance">randomize_appearance</a></th><td>Completely random image and color generation (obeys what a player can choose from)</td></tr>
            <tr><th><a href="datum/bodypart_overlay/mutant.html#proc/randomize_sprite">randomize_sprite</a></th><td>Grab a random sprite</td></tr>
            <tr><th><a href="datum/bodypart_overlay/mutant.html#proc/set_appearance">set_appearance</a></th><td>Change our accessory sprite, using the accesssory type. If you need to change the sprite for something, use simple_change_sprite()</td></tr>
            <tr><th><a href="datum/bodypart_overlay/mutant.html#proc/set_appearance_from_name">set_appearance_from_name</a></th><td>In a lot of cases, appearances are stored in DNA as the Name, instead of the path. Use set_appearance instead of possible</td></tr></table>
    <h2 id="var">Var Details</h2><h3 id="var/color_source"><aside class="declaration">var </aside>color_source
            <aside>&ndash; </aside>
        
    
            <a href="https://github.com/fulpstation/fulpstation/blob/629e2d40b55cd98862d1c91ccc4f04e9286e1fdc/code/datums/bodypart_overlays/mutant_bodypart_overlay.dm#L12">
        <img src="git.png" width="16" height="16" title="code&#x2F;datums&#x2F;bodypart_overlays&#x2F;mutant_bodypart_overlay.dm 12"/></a></h3>
        <p>Where does this organ inherit it's color from?</p><h3 id="var/draw_color"><aside class="declaration">var </aside>draw_color
            <aside>&ndash; </aside>
        
    
            <a href="https://github.com/fulpstation/fulpstation/blob/629e2d40b55cd98862d1c91ccc4f04e9286e1fdc/code/datums/bodypart_overlays/mutant_bodypart_overlay.dm#L10">
        <img src="git.png" width="16" height="16" title="code&#x2F;datums&#x2F;bodypart_overlays&#x2F;mutant_bodypart_overlay.dm 10"/></a></h3>
        <p>The color this organ draws with. Updated by bodypart/inherit_color()</p><h3 id="var/feature_key"><aside class="declaration">var </aside>feature_key
            <aside>&ndash; </aside>
        
    
            <a href="https://github.com/fulpstation/fulpstation/blob/629e2d40b55cd98862d1c91ccc4f04e9286e1fdc/code/datums/bodypart_overlays/mutant_bodypart_overlay.dm#L7">
        <img src="git.png" width="16" height="16" title="code&#x2F;datums&#x2F;bodypart_overlays&#x2F;mutant_bodypart_overlay.dm 7"/></a></h3>
        <p>Defines what kind of 'organ' we're looking at. Sprites have names like 'm_mothwings_firemoth_ADJ'. 'mothwings' would then be feature_key</p><h3 id="var/imprint_on_next_insertion"><aside class="declaration">var </aside>imprint_on_next_insertion
            <aside>&ndash; </aside>
        
    
            <a href="https://github.com/fulpstation/fulpstation/blob/629e2d40b55cd98862d1c91ccc4f04e9286e1fdc/code/datums/bodypart_overlays/mutant_bodypart_overlay.dm#L14">
        <img src="git.png" width="16" height="16" title="code&#x2F;datums&#x2F;bodypart_overlays&#x2F;mutant_bodypart_overlay.dm 14"/></a></h3>
        <p>Take on the dna/preference from whoever we're gonna be inserted in</p><h3 id="var/sprite_datum"><aside class="declaration">var </aside>sprite_datum
            <aside>&ndash; /<a href="datum.html">datum</a>/<a href="datum/sprite_accessory.html">sprite_accessory</a></aside>
        
    
            <a href="https://github.com/fulpstation/fulpstation/blob/629e2d40b55cd98862d1c91ccc4f04e9286e1fdc/code/datums/bodypart_overlays/mutant_bodypart_overlay.dm#L4">
        <img src="git.png" width="16" height="16" title="code&#x2F;datums&#x2F;bodypart_overlays&#x2F;mutant_bodypart_overlay.dm 4"/></a></h3>
        <p>Sprite datum we use to draw on the bodypart</p><h2 id="proc">Proc Details</h2><h3 id="proc/fetch_sprite_datum"><aside class="declaration">proc </aside>fetch_sprite_datum<aside>(/<a href="datum.html">datum</a>/<a href="datum/sprite_accessory.html">sprite_accessory</a>/accessory_path) 
        
    
            <a href="https://github.com/fulpstation/fulpstation/blob/629e2d40b55cd98862d1c91ccc4f04e9286e1fdc/code/datums/bodypart_overlays/mutant_bodypart_overlay.dm#L123">
        <img src="git.png" width="16" height="16" title="code&#x2F;datums&#x2F;bodypart_overlays&#x2F;mutant_bodypart_overlay.dm 123"/></a></aside>
        </h3>
        <p>Sprite accessories are singletons, stored list(&quot;Big Snout&quot; = instance of /datum/sprite_accessory/snout/big), so here we get that singleton</p><h3 id="proc/fetch_sprite_datum_from_name"><aside class="declaration">proc </aside>fetch_sprite_datum_from_name<aside>(accessory_name) 
        
    
            <a href="https://github.com/fulpstation/fulpstation/blob/629e2d40b55cd98862d1c91ccc4f04e9286e1fdc/code/datums/bodypart_overlays/mutant_bodypart_overlay.dm#L129">
        <img src="git.png" width="16" height="16" title="code&#x2F;datums&#x2F;bodypart_overlays&#x2F;mutant_bodypart_overlay.dm 129"/></a></aside>
        </h3>
        <p>Get the singleton from the sprite name</p><h3 id="proc/generate_icon_cache"><aside class="parent"><a title="/datum/bodypart_overlay" href="datum/bodypart_overlay.html#proc/generate_icon_cache">&uarr;</a></aside>generate_icon_cache<aside>() 
        
    
            <a href="https://github.com/fulpstation/fulpstation/blob/629e2d40b55cd98862d1c91ccc4f04e9286e1fdc/code/datums/bodypart_overlays/mutant_bodypart_overlay.dm#L84">
        <img src="git.png" width="16" height="16" title="code&#x2F;datums&#x2F;bodypart_overlays&#x2F;mutant_bodypart_overlay.dm 84"/></a></aside>
        </h3>
        <p>Generate a unique key based on our sprites. So that if we've aleady drawn these sprites, they can be found in the cache and wont have to be drawn again (blessing and curse, but mostly curse)</p><h3 id="proc/get_base_icon_state"><aside class="declaration">proc </aside>get_base_icon_state<aside>() 
        
    
            <a href="https://github.com/fulpstation/fulpstation/blob/629e2d40b55cd98862d1c91ccc4f04e9286e1fdc/code/datums/bodypart_overlays/mutant_bodypart_overlay.dm#L42">
        <img src="git.png" width="16" height="16" title="code&#x2F;datums&#x2F;bodypart_overlays&#x2F;mutant_bodypart_overlay.dm 42"/></a></aside>
        </h3>
        <p>Return the BASE icon state of the sprite datum (so not the gender, layer, feature_key)</p><h3 id="proc/get_global_feature_list"><aside class="declaration">proc </aside>get_global_feature_list<aside>() 
        
    
            <a href="https://github.com/fulpstation/fulpstation/blob/629e2d40b55cd98862d1c91ccc4f04e9286e1fdc/code/datums/bodypart_overlays/mutant_bodypart_overlay.dm#L92">
        <img src="git.png" width="16" height="16" title="code&#x2F;datums&#x2F;bodypart_overlays&#x2F;mutant_bodypart_overlay.dm 92"/></a></aside>
        </h3>
        <p>Return a dumb glob list for this specific feature (called from parse_sprite)</p><h3 id="proc/get_image"><aside class="parent"><a title="/datum/bodypart_overlay" href="datum/bodypart_overlay.html#proc/get_image">&uarr;</a></aside>get_image<aside>(image_layer, /<a href="obj.html">obj</a>/<a href="obj/item.html">item</a>/<a href="obj/item/bodypart.html">bodypart</a>/limb) 
        
    
            <a href="https://github.com/fulpstation/fulpstation/blob/629e2d40b55cd98862d1c91ccc4f04e9286e1fdc/code/datums/bodypart_overlays/mutant_bodypart_overlay.dm#L46">
        <img src="git.png" width="16" height="16" title="code&#x2F;datums&#x2F;bodypart_overlays&#x2F;mutant_bodypart_overlay.dm 46"/></a></aside>
        </h3>
        <p>Get the image we need to draw on the person. Called from get_overlay() which is called from _bodyparts.dm. Limb can be null</p><h3 id="proc/get_random_appearance"><aside class="declaration">proc </aside>get_random_appearance<aside>() 
        
    
            <a href="https://github.com/fulpstation/fulpstation/blob/629e2d40b55cd98862d1c91ccc4f04e9286e1fdc/code/datums/bodypart_overlays/mutant_bodypart_overlay.dm#L31">
        <img src="git.png" width="16" height="16" title="code&#x2F;datums&#x2F;bodypart_overlays&#x2F;mutant_bodypart_overlay.dm 31"/></a></aside>
        </h3>
        <p>Grab a random appearance datum (thats not locked)</p><h3 id="proc/inherit_color"><aside class="declaration">proc </aside>inherit_color<aside>(/<a href="obj.html">obj</a>/<a href="obj/item.html">item</a>/<a href="obj/item/bodypart.html">bodypart</a>/ownerlimb, force) 
        
    
            <a href="https://github.com/fulpstation/fulpstation/blob/629e2d40b55cd98862d1c91ccc4f04e9286e1fdc/code/datums/bodypart_overlays/mutant_bodypart_overlay.dm#L96">
        <img src="git.png" width="16" height="16" title="code&#x2F;datums&#x2F;bodypart_overlays&#x2F;mutant_bodypart_overlay.dm 96"/></a></aside>
        </h3>
        <p>Give the organ its color. Force will override the existing one.</p><h3 id="proc/randomize_appearance"><aside class="declaration">proc </aside>randomize_appearance<aside>() 
        
    
            <a href="https://github.com/fulpstation/fulpstation/blob/629e2d40b55cd98862d1c91ccc4f04e9286e1fdc/code/datums/bodypart_overlays/mutant_bodypart_overlay.dm#L21">
        <img src="git.png" width="16" height="16" title="code&#x2F;datums&#x2F;bodypart_overlays&#x2F;mutant_bodypart_overlay.dm 21"/></a></aside>
        </h3>
        <p>Completely random image and color generation (obeys what a player can choose from)</p><h3 id="proc/randomize_sprite"><aside class="declaration">proc </aside>randomize_sprite<aside>() 
        
    
            <a href="https://github.com/fulpstation/fulpstation/blob/629e2d40b55cd98862d1c91ccc4f04e9286e1fdc/code/datums/bodypart_overlays/mutant_bodypart_overlay.dm#L27">
        <img src="git.png" width="16" height="16" title="code&#x2F;datums&#x2F;bodypart_overlays&#x2F;mutant_bodypart_overlay.dm 27"/></a></aside>
        </h3>
        <p>Grab a random sprite</p><h3 id="proc/set_appearance"><aside class="parent"><a title="/datum/bodypart_overlay" href="datum/bodypart_overlay.html#proc/set_appearance">&uarr;</a></aside>set_appearance<aside>(accessory_type) 
        
    
            <a href="https://github.com/fulpstation/fulpstation/blob/629e2d40b55cd98862d1c91ccc4f04e9286e1fdc/code/datums/bodypart_overlays/mutant_bodypart_overlay.dm#L74">
        <img src="git.png" width="16" height="16" title="code&#x2F;datums&#x2F;bodypart_overlays&#x2F;mutant_bodypart_overlay.dm 74"/></a></aside>
        </h3>
        <p>Change our accessory sprite, using the accesssory type. If you need to change the sprite for something, use simple_change_sprite()</p><h3 id="proc/set_appearance_from_name"><aside class="declaration">proc </aside>set_appearance_from_name<aside>(accessory_name) 
        
    
            <a href="https://github.com/fulpstation/fulpstation/blob/629e2d40b55cd98862d1c91ccc4f04e9286e1fdc/code/datums/bodypart_overlays/mutant_bodypart_overlay.dm#L79">
        <img src="git.png" width="16" height="16" title="code&#x2F;datums&#x2F;bodypart_overlays&#x2F;mutant_bodypart_overlay.dm 79"/></a></aside>
        </h3>
        <p>In a lot of cases, appearances are stored in DNA as the Name, instead of the path. Use set_appearance instead of possible</p></main>
<footer>
    tgstation.dme
    <a href="https://github.com/fulpstation/fulpstation/tree/629e2d40b55cd98862d1c91ccc4f04e9286e1fdc">629e2d4</a>
        (master) &mdash; <a href="https://github.com/SpaceManiac/SpacemanDMM/blob/master/crates/dmdoc/README.md">dmdoc 1.7.3</a></footer>
</body>
</html>
